# =============================================================================
# NoteNest - Docker Compose (Development)
# =============================================================================
# Für lokale Entwicklung mit Hot-Reload
# =============================================================================

services:
  notenest-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    
    container_name: notenest-dev
    
    # --- Ports ---
    ports:
      - "3000:3000"    # Backend API
      - "5173:5173"    # Vite Dev Server (Frontend)
    
    # --- Volumes (Live-Reload) ---
    volumes:
      # Source-Code (für Hot-Reload)
      - ./backend:/app/backend
      - ./frontend:/app/frontend
      
      # Daten (lokal)
      - ./data/bibles:/app/data/bibles:ro
      - ./data/database:/app/data/database
      - ./data/users:/app/data/users
      - ./data/shared:/app/data/shared
      
      # Logs
      - ./logs:/app/logs
      
      # .env Datei
      - ./.env:/app/.env
    
    # --- Umgebungsvariablen ---
    # Werte wie NODE_ENV/LOG_LEVEL bitte in .env setzen.
    env_file:
      - .env
    
    # --- Netzwerk ---
    networks:
      - notenest-network
    
    # --- Command ---
    command: npm run dev
    
    # --- Restart Policy ---
    restart: unless-stopped

networks:
  notenest-network:
    driver: bridge
